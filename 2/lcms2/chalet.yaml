name: oflibs
version: "1.0"
externalDependencies:
  lcms2:
    # repository: https://github.com/mm2/Little-CMS
    repository: https://github.com/dimitre/Little-CMS
    # commit: 5cdf304
    kind: git

targets:
  lcms2:
    kind: mesonProject
    location: ${external:${name}}
    install: true
    defines:
      - buildtype=release
      - default_library=static
      - tests=disabled

      # - prefix=${cwd}/${externalBuild:${name}}/install
      # - prefix=${cwd}
      # - prefix=${cwd}/${externalBuild:${name}}/install

    defines[platform:macos]:
      - c_args=-mmacos-version-min=10.15
      - cpp_args=-mmacos-version-min=10.15

    defines[toolchain:msvc]:
      - b_vscrt=static_from_buildtype

distribution:
  lcms2:
    kind: archive
    format: zip
    include:
      - ${externalBuild:lcms2}/install/lib
      - ${externalBuild:lcms2}/install/include
